<Page xmlns="http://schemas.nativescript.org/tns.xsd" navigatingTo="onNavigatingTo">
    <ActionBar title="Virtual Queue" />
    
    <GridLayout rows="auto, *">
        <StackLayout row="0" class="p-4 bg-white">
            <Label text="Active Queues" class="text-xl font-bold mb-2" />
            <Label text="{{ activeQueuesMessage }}" class="text-gray-600" textWrap="true" />
        </StackLayout>
        
        <ListView row="1" items="{{ activeQueues }}" class="list-group">
            <ListView.itemTemplate>
                <GridLayout rows="auto, auto" columns="*, auto" class="card">
                    <StackLayout row="0" col="0">
                        <Label text="{{ stallName }}" class="font-bold text-lg" />
                        <Label text="{{ hawkerCenter }}" class="text-gray-600" />
                    </StackLayout>
                    <StackLayout row="0" col="1" class="text-right">
                        <Label text="{{ queueNumber }}" class="text-2xl font-bold text-orange-500" />
                        <Label text="Queue #" class="text-sm text-gray-600" />
                    </StackLayout>
                    <StackLayout row="1" col="0" colSpan="2" class="mt-2">
                        <ProgressBar value="{{ progress }}" maxValue="100" class="m-y-2" />
                        <FlexboxLayout>
                            <Label text="{{ peopleAhead }}" class="text-sm text-gray-600" />
                            <Label text=" people ahead â€¢ " class="text-sm text-gray-400" />
                            <Label text="{{ estimatedTime }}" class="text-sm text-gray-600" />
                        </FlexboxLayout>
                        <Button text="Leave Queue" tap="{{ onLeaveQueue }}" class="btn-primary mt-2" />
                    </StackLayout>
                </GridLayout>
            </ListView.itemTemplate>
        </ListView>
    </GridLayout>
</Page>